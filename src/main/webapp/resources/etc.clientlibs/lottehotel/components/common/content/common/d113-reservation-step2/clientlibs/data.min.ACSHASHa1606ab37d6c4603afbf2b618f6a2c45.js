var renditionWeb=".thumb.1440.1440.jpg",renditionTablet=".thumb.1024.1024.jpg",renditionMobile=".thumb.768.768.jpg",renditionSrc="${userContext.deviceType \x3d\x3d 'web' ? renditionWeb : ''}${userContext.deviceType \x3d\x3d 'tablet' ? renditionTablet : ''}${userContext.deviceType \x3d\x3d 'mobile' ? renditionMobile : ''}",viewTypeCookie=document.cookie.match("(^|;) ?VIEWTYPE\x3d([^;]*)(;|$)"),viewType=viewTypeCookie?viewTypeCookie[2]:"web";
(function(b){FES.MD.DEV=function(){return{d113:function(c,a){"login_popup"===c?b('button.d113__button--complete[data-js\x3d"modal"]').data("login")?d113_setParam()&&d113_goStep3():d113_setParam()&&(c=getCookie("userInputId"),b("#inp-login-id").val(c),""!=b("#inp-login-id").val()&&b("#chk-save-id").attr("checked",!0),a&&"function"===typeof a&&a()):"logined"===c?d113_goStep3():"join"===c?d113_join():"login"===c&&d113_login()}}}()})(jQuery);
$(document).ready(function(){$("select#sel-country").on("change",function(a){d113_changeCurrency()});$("select#sel-product").on("change",function(a){d113_changeRateType()});$("select#sel-building").on("change",function(a){d113_changeBuilding()});$("a.d113-tab__title:first").on("click",function(a){d113_init("room")});$("a.d113-tab__title:last").on("click",function(a){d113_init("rate")});var b=$('form[name\x3d"stepForm"] input[name\x3d"roomTypeCode"]').val(),c=$('form[name\x3d"stepForm"] input[name\x3d"ratePlanCode"]').val();
""==$.trim(b)&&""==$.trim(c)&&(FES.UI.loading($(".loading-dimmd"),!0),FES.UI.loading($(".loading-dimmd"),!1))});$(window).load(function(){d113_init()});
var initFlag=!1,initCnt=0,initAlert=!0,d113_init=function(b){var c=$('form[name\x3d"stepForm"] input[name\x3d"roomTypeCode"]').val(),a=$('form[name\x3d"stepForm"] input[name\x3d"ratePlanCode"]').val();if("undefined"!==typeof b||""!=$.trim(c)||""!=$.trim(a))"undefined"===typeof b&&(b=""!=c&&""==a?"room":""==c&&""!=a?"rate":""==c&&""==a?"room":"rate"),$('#d113-roomList div.accrdion__panel.is-active[data-js\x3d"accordion__panel"] button.d113-close__btn').trigger("click"),$('#d113-roomList div.accrdion__panel.is-active[data-js\x3d"accordion__panel"] button.d113__button.d113__button--room-add.is-active').trigger("click"),
$('#d113-rateList div.accrdion__panel.is-active[data-js\x3d"accordion__panel"] button.d113-close__btn').trigger("click"),$('#d113-rateList div.accrdion__panel.is-active[data-js\x3d"accordion__panel"] button.d113__button.d113__button--room-add.is-active').trigger("click"),$("a.d113-tab__title").removeClass("active"),"rate"==b?($("a.d113-tab__title:last").addClass("active"),$("#d113-roomList").hide(),$("#d113-rateList").show(),$("#d113-selectRateType").show(),$("#d113-selectBuilding").hide(),0==initCnt&&
a&&""!=a&&(FES.UI.loading($(".loading-dimmd"),!0),FES.UI.loading($(".loading-dimmd"),!1),0<$("#d113-rateList").find('div.d113-accordion__li[data-rateplancode\x3d"'+a+'"]').find('button[data-js\x3d"accordion__anchor"]').size()?($("#d113-rateList").find('div.d113-accordion__li[data-rateplancode\x3d"'+a+'"]').find('button[data-js\x3d"accordion__anchor"]').trigger("click"),c&&""!=c?0<$("#d113-rateList").find('button[data-js\x3d"accordion__anchor2"][data-roomtypecode\x3d"'+c+'"][data-rateplancode\x3d"'+
a+'"]').size()?(initFlag=!0,$("#d113-rateList").find('button[data-js\x3d"accordion__anchor2"][data-roomtypecode\x3d"'+c+'"][data-rateplancode\x3d"'+a+'"]').trigger("click")):setTimeout(function(){try{var b=$("#d113-rateList").find('div.d113-accordion__li[data-rateplancode\x3d"'+a+'"]').offset();$("html, body").animate({scrollTop:b.top-50},400)}catch(g){}},500):0<$("#d113-rateList").find('div.d113-accordion__li[data-rateplancode\x3d"'+a+'"]').find('button[data-js\x3d"accordion__anchor2"]:first').size()&&
(initFlag=!0,$("#d113-rateList").find('div.d113-accordion__li[data-rateplancode\x3d"'+a+'"]').find('button[data-js\x3d"accordion__anchor2"]:first').trigger("click"))):initAlert&&(b=Granite.I18n.get("There is no room available for reservation at the selected conditions.")+"\n"+Granite.I18n.get("Please select another room or product that can be reserved."),alert(b),initAlert=!1))):($("a.d113-tab__title:first").addClass("active"),$("#d113-roomList").show(),$("#d113-rateList").hide(),$("#d113-selectRateType").hide(),
$("#d113-selectBuilding").show(),0==initCnt&&c&&""!=c&&(FES.UI.loading($(".loading-dimmd"),!0),FES.UI.loading($(".loading-dimmd"),!1),0<$("#d113-roomList").find('div.d113-accordion__li[data-roomtypecode\x3d"'+c+'"]').find('button[data-js\x3d"accordion__anchor"]').size()?($("#d113-roomList").find('div.d113-accordion__li[data-roomtypecode\x3d"'+c+'"]').find('button[data-js\x3d"accordion__anchor"]').trigger("click"),a&&""!=a?0<$("#d113-roomList").find('button[data-js\x3d"accordion__anchor2"][data-roomtypecode\x3d"'+
c+'"][data-rateplancode\x3d"'+a+'"]').size()&&(initFlag=!0,$("#d113-roomList").find('button[data-js\x3d"accordion__anchor2"][data-roomtypecode\x3d"'+c+'"][data-rateplancode\x3d"'+a+'"]').trigger("click")):setTimeout(function(){try{var a=$("#d113-roomList").find('div.d113-accordion__li[data-roomtypecode\x3d"'+c+'"]').offset();$("html, body").animate({scrollTop:a.top-50},400)}catch(g){console.log(g)}},500)):initAlert&&(b=Granite.I18n.get("There is no room available for reservation at the selected conditions.")+
"\n"+Granite.I18n.get("Please select another room or product that can be reserved."),alert(b),initAlert=!1))),initCnt++},d113_goStep3=function(){try{var b=$('div.accrdion__panel.is-active span.d113-amount__number[data-js\x3d"price_total"]').text(),c=$('div.accrdion__panel.is-active span.d113-amount__number[data-js\x3d"price_total"]').data("orgnamt");b&&(-1<b.toLowerCase().indexOf("nan")&&(b=""),b=b.replace(/[^0-9]/g,""));if("undefined"===typeof b||""==b||parseInt(b)<parseInt(c)){var a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator");
alert(a);window.location.reload();return}}catch(h){}d113_setParam()&&(b=$('form[name\x3d"stepForm"]').serialize(),$.ajax({type:"POST",url:"/global/ajax/reservation.step.json",data:b+"\x26toStep\x3d3",beforeSend:function(a){FES.UI.loading($(".loading-dimmd"),!0)},success:function(a){if(a.result&&"OK"==a.result)window.location.href=$('form[name\x3d"stepForm"]').attr("action");else{try{console.log(a.result+a.resultMsg)}catch(g){}a.resultMsg&&-1<a.resultMsg.indexOf("NOT_EXIST_RESERV_INFO")?(a=Granite.I18n.get("The reservation information does not exist because it has not been used for a long time or the session is terminated. Please make your reservation again."),
alert(a),window.location.href="accommodation-step0.html"):(a=Granite.I18n.get("An error occurred during the reservation process."),alert(a),FES.UI.loading($(".loading-dimmd"),!1))}},error:function(a,b,c){a=Granite.I18n.get("An error occurred during the reservation process.");alert(a);FES.UI.loading($(".loading-dimmd"),!1)}}))},d113_setParam=function(){if($("a.d113-tab__title:first").hasClass("active")){var b=$('#d113-roomList div.d113-accordion__li[data-roomtypecode\x3d"'+$('form[name\x3d"stepForm"] input[name\x3d"roomTypeCode"]').val()+
'"]');b=b.find('li.d113-compare__list[data-rateplancode\x3d"'+$('form[name\x3d"stepForm"] input[name\x3d"ratePlanCode"]').val()+'"]')}else b=$('#d113-rateList div.d113-accordion__li[data-rateplancode\x3d"'+$('form[name\x3d"stepForm"] input[name\x3d"ratePlanCode"]').val()+'"]'),b=b.find('li.d113-compare__list[data-roomtypecode\x3d"'+$('form[name\x3d"stepForm"] input[name\x3d"roomTypeCode"]').val()+'"]');var c=b.find("div.d113-option");b.find("div.d113__field.d113__field--choice");b=c.find("ul.d113-option__list \x3e li.d113-dev-breakfast");
var a=c.find("ul.d113-option__list \x3e li.d113-dev-room-view"),h=c.find("ul.d113-option__list \x3e li.d113-dev-smoking-room");c=c.find("ul.d113-option__list \x3e li.d113-dev-add-request");for(var g=parseInt($('form[name\x3d"stepForm"] input[name\x3d"numberOfRooms"]').val()),e=1;e<=g;e++){var d="";b.find('input[data-optcode\x3d"BFA'+e+'"]').each(function(a,b){$(b).attr("aria-valuenow")&&(""!=d&&(d+="|"),d+=$(b).data("operacode")+"_"+$(b).attr("aria-valuenow"))});$('form[name\x3d"stepForm"] input[name\x3d"BFA'+
e+'"]').val(d);d="";b.find('input[data-optcode\x3d"BFC'+e+'"]').each(function(a,b){$(b).attr("aria-valuenow")&&(""!=d&&(d+="|"),d+=$(b).data("operacode")+"_"+$(b).attr("aria-valuenow"))});$('form[name\x3d"stepForm"] input[name\x3d"BFC'+e+'"]').val(d);a.find('input[data-optcode\x3d"RV'+e+'"]')&&a.find('input[data-optcode\x3d"RV'+e+'"]').each(function(a,b){$(b).prop("checked")&&$('form[name\x3d"stepForm"] input[name\x3d"RV'+e+'"]').val($(b).data("operacode"))});h.find('input[data-optcode\x3d"SR'+e+
'"]')&&h.find('input[data-optcode\x3d"SR'+e+'"]').each(function(a,b){$(b).prop("checked")&&$('form[name\x3d"stepForm"] input[name\x3d"SR'+e+'"]').val($(b).data("operacode"))});c.find('textarea[data-optcode\x3d"CMT'+e+'"]')&&$('form[name\x3d"stepForm"] input[name\x3d"CMT'+e+'"]').val(c.find('textarea[data-optcode\x3d"CMT'+e+'"]').val())}h.find('input[type\x3d"checkbox"][data-js\x3d"apply_anchor"]').prop("checked")?$('form[name\x3d"stepForm"] input[name\x3d"allAddSrApply"]').val("Y"):$('form[name\x3d"stepForm"] input[name\x3d"allAddSrApply"]').val("N");
c.find('input[type\x3d"checkbox"][data-js\x3d"apply_anchor"]').prop("checked")?$('form[name\x3d"stepForm"] input[name\x3d"allAddCommentApply"]').val("Y"):$('form[name\x3d"stepForm"] input[name\x3d"allAddCommentApply"]').val("N");return!0},d113_getRateDailyInfo=function(b){var c=$(b);$('form[name\x3d"stepForm"] input[name\x3d"categoryCode"]').val(c.data("categorycode"));$('form[name\x3d"stepForm"] input[name\x3d"ratePlanCode"]').val(c.data("rateplancode"));$('form[name\x3d"stepForm"] input[name\x3d"ratePlanName"]').val(c.data("rateplanname"));
$('form[name\x3d"stepForm"] input[name\x3d"roomTypeCode"]').val(c.data("roomtypecode"));$('form[name\x3d"stepForm"] input[name\x3d"roomTypeName"]').val(c.data("roomtypename"));try{b={},b.id=c.data("roomtypecode"),b.name=c.data("roomtypename"),clickProductForGtm(b)}catch(a){}try{b={},b.id=c.data("rateplancode"),b.name=c.data("rateplanname"),clickPromotionForGtm(b)}catch(a){}$.ajax({type:"GET",url:"/global/ajax/reservation.roomsDetail.json?"+$('form[name\x3d"stepForm"]').serialize(),beforeSend:function(a){FES.UI.loading($(".loading-dimmd"),
!0)},complete:function(a,b){FES.UI.loading($(".loading-dimmd"),!1)},success:function(a){var b=c.closest("li.d113-compare__list"),g=b.find("div.d113-option"),e=b.find("div.d113__field.d113__field--choice");b=parseInt($('form[name\x3d"stepForm"] input[name\x3d"numberOfRooms"]').val());a.ratePlanDescription&&e.find(".d113-policy__item div:first").html(a.ratePlanDescription.replace("/-/gi","\x3cbr\x3e-").replace("\x3cbr\x3e",""));for(var d="",k="",p=0;p<a.dailyRate.length;p++)k=a.dailyRate[p],d+="\x3cli\x3e",
d+='    \x3cp class\x3d"d113__bullet--dot"\x3e'+k.postingDate+"\x3c/p\x3e",d+='    \x3cp class\x3d"d113-choice__detail--price"\x3e',d+='        \x3cspan class\x3d"d113-price__unit"\x3e'+k.currencyCode+"\x3c/span\x3e",d+='        \x3cspan class\x3d"d113-price__num"\x3e'+formatMoneyComma(k.totalCharges)+"\x3c/span\x3e",d+="    \x3c/p\x3e",d+="\x3c/li\x3e",k=k.currencyCode;e.find("div.d113-choice__room ul.d113-choice__detail").html(d);e.find("div.d113-choice__room span.d113-choice__right span.d113-price__unit").html(k);
e.find('div.d113-choice__room span.d113-choice__right span[data-js\x3d"price"]').html(formatMoneyComma(a.totalRoomRateAndPackages));$('[data-js\x3d"scroll"]',e).data("iScroll")&&$('[data-js\x3d"scroll"]',e).data("iScroll").refresh();e.find("div.d113-choice__info:last p.d113-choice__detail--price span:first").html(k);e.find("div.d113-choice__info:last p.d113-choice__detail--price span:last").html(formatMoneyComma(a.totalTaxesAndFees*b));e.find("div.d113-choice__info:last p.d113-choice__detail--price span:last").data("origintax",
a.totalTaxesAndFees*b);e.find("div.d113-amount p.d113-amount__price span.d113-amount__unit").html(k);e.find("div.d113-amount p.d113-amount__price span.d113-amount__number").html(formatMoneyComma((a.totalRoomRateAndPackages+a.totalTaxesAndFees)*b));e.find("div.d113-amount p.d113-amount__price span.d113-amount__number").data("orgnamt",(a.totalRoomRateAndPackages+a.totalTaxesAndFees)*b);a={primaryLangID:$('form[name\x3d"stepForm"] input[name\x3d"primaryLangID"]').val(),startDate:$('form[name\x3d"stepForm"] input[name\x3d"startDate"]').val(),
endDate:$('form[name\x3d"stepForm"] input[name\x3d"endDate"]').val(),hotelCode:$('form[name\x3d"stepForm"] input[name\x3d"hotelCode"]').val(),currencyYN:"N",numberOfAdults:1,numberOfChildren:1,rateDetailPath:c.data("ratedetailpath"),rateCategory:c.data("categorycode"),ratePlanCode:c.data("rateplancode")};$.ajax({type:"GET",url:"/global/ajax/reservation.roomsPackages.json",data:a,success:function(a){var b=g.find("ul.d113-option__list \x3e li.d113-dev-breakfast"),h=g.find("ul.d113-option__list \x3e li.d113-dev-room-view"),
d=g.find("ul.d113-option__list \x3e li.d113-dev-smoking-room"),k=g.find("ul.d113-option__list \x3e li.d113-dev-add-request"),v=parseInt($('form[name\x3d"stepForm"] input[name\x3d"numberOfRooms"]').val());a=a.optList;for(var l=0;l<a.length;l++){if("BF"==a[l].category){var f=b.find('div[data-bfacount\x3d"'+a[l].operaCd+'"]');f.find("span.d113-unit").html(a[l].currencyCode);$('[data-js\x3d"meal_panel"]',e).find("p.d113-choice__detail--price span.d113-price__unit").html(a[l].currencyCode);f.find('span[data-js\x3d"price_adult"]').html(formatMoneyComma(a[l].amount));
f.find('span[data-js\x3d"price_adult"]').data("tax",a[l].tax);for(f=1;f<=v;f++)if(initFlag){var m=$('form[name\x3d"stepForm"] input[name\x3d"BFA'+f+'"]').val();var p=0;var n="";var r=m.split("|");for(var t=0;t<r.length;t++)m=r[t],-1<m.indexOf("_")&&(n=m.split("_")[0],p=m.split("_")[1]),0<p&&(b.find('input[data-optcode\x3d"BFA'+f+'"][data-operacode\x3d"'+n+'"]').prop("value",p).trigger("update"),b.find('input[data-optcode\x3d"BFA'+f+'"][data-operacode\x3d"'+n+'"]').prop("value",p).trigger("change.counter"))}if("undefined"!==
typeof a[l].operaCd2)for(f=b.find('div[data-bfccount\x3d"'+a[l].operaCd2+'"]'),f.find("span.d113-unit").html(a[l].currencyCode2),f.find('span[data-js\x3d"price_child"]').html(formatMoneyComma(a[l].amount2)),f.find('span[data-js\x3d"price_child"]').data("tax",a[l].tax2),f=1;f<=v;f++)if(initFlag)for(m=$('form[name\x3d"stepForm"] input[name\x3d"BFC'+f+'"]').val(),p=0,n="",r=m.split("|"),t=0;t<r.length;t++)m=r[t],-1<m.indexOf("_")&&(n=m.split("_")[0],p=m.split("_")[1]),0<p&&(b.find('input[data-optcode\x3d"BFC'+
f+'"][data-operacode\x3d"'+n+'"]').prop("value",p).trigger("update"),b.find('input[data-optcode\x3d"BFC'+f+'"][data-operacode\x3d"'+n+'"]').prop("value",p).trigger("change.counter"))}if("RV"==a[l].category)for(f=h.find('div[data-rvoperacode\x3d"'+a[l].operaCd+'"]'),f.find("span.room-view__price").html("("+a[l].currencyCode+" "+formatMoneyComma(a[l].amount)+")"),f.find("span.room-view__price").data("tax",a[l].tax),f=1;f<=v;f++)initFlag&&(n=$('form[name\x3d"stepForm"] input[name\x3d"RV'+f+'"]').val(),
b.find('input[data-optcode\x3d"RV'+f+'"][data-operacode\x3d"'+n+'"]').trigger("click"));if("SR"==a[l].category){for(f=1;f<=v;f++)d.find('input[data-optcode\x3d"SR'+f+'"]').eq(0).attr("data-operacode",a[l].operaCd),n=d.find('input[data-optcode\x3d"SR'+f+'"]').eq(0).id,d.find('label[for\x3d"'+n+'"]').html(a[l].label1),d.find('input[data-optcode\x3d"SR'+f+'"]').eq(1).attr("data-operacode",a[l].operaCd2),n=d.find('input[data-optcode\x3d"SR'+f+'"]').eq(1).id,d.find('label[for\x3d"'+n+'"]').html(a[l].label2),
initFlag&&($('form[name\x3d"stepForm"] input[name\x3d"SR'+f+'"]').val()==a[l].operaCd2?d.find('input[data-optcode\x3d"SR'+f+'"]').eq(1).trigger("click"):d.find('input[data-optcode\x3d"SR'+f+'"]').eq(0).trigger("click"));initFlag&&"Y"!=$('form[name\x3d"stepForm"] input[name\x3d"allAddSrApply"]').val()&&d.find('input[type\x3d"checkbox"][data-js\x3d"apply_anchor"]').trigger("click")}if("CMT"==a[l].category&&initFlag){for(f=1;f<=v;f++)n=$('form[name\x3d"stepForm"] input[name\x3d"CMT'+f+'"]').val(),""!=
n&&k.find('textarea[data-optcode\x3d"CMT'+f+'"]').val(n).removeAttr("placeholder");"Y"!=$('form[name\x3d"stepForm"] input[name\x3d"allAddCommentApply"]').val()&&k.find('input[type\x3d"checkbox"][data-js\x3d"apply_anchor"]').trigger("click")}}initFlag=!1;setTimeout(function(){try{var a=c.parents("div.d113-accordion__li").offset();$("html, body").animate({scrollTop:a.top-50},400)}catch(y){}},500);"Y"==c.data("bfnotmodify")&&b.find("input.c-counter__field").trigger("lock")},error:function(a){a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator");
alert(a);window.location.reload()}})}})},d113_changeRateType=function(b){var c="";$("select#sel-product option").each(function(a,b){$(b).prop("selected")&&(c=$(b).val())});$("#d113-rateList .d113-accordion__li").each(function(a,b){""==c||$(b).data("rateplancategory")==c||$(b).data("ratesection")==c?$(b).show():$(b).hide()})},d113_changeBuilding=function(b){var c="";$("select#sel-building option").each(function(a,b){$(b).prop("selected")&&(c=$(b).val())});var a=0;$("#d113-roomList .d113-accordion__li").each(function(b,
g){""==c||-1<$(g).data("buildingtypecode").indexOf(c)?($(g).show(),a++):$(g).hide()});0==a&&(b=Granite.I18n.get("There is no room available for reservation at the selected conditions."),alert(b))},d113_changeCurrency=function(b){b=Granite.I18n.get("The exchange rate may be different from the actual hotel rate as the official exchange rate.");alert(b);b=$("select#sel-country").data("orgncurrency");var c="";$("select#sel-country option").each(function(a,b){$(b).prop("selected")&&(c=$(b).val())});b=
{fromCurrency:b.toUpperCase(),toCurrency:c.toUpperCase()};$.ajax({type:"GET",url:"/global/ajax/reservation.exchageRate.json",data:b,success:function(a){"OK"==a.result&&d113_changePrice(a.exchageRate.toCurrency,a.exchageRate.cashBuy)}})},d113_changePrice=function(b,c){var a=$("select#sel-country").data("orgncurrency");$("span[data-orgnprice]").each(function(h,g){a==$(g).data("orgncurrency")&&($(g).siblings("span:first").text(b),h=$(g).data("orgnprice"),h=parseInt(c*h),$(g).text(formatMoneyComma(h)+
"~"))})},d113_anotherDayPrice=function(b){$(b).siblings('section[data-js\x3d"anotherDay__modal"]');var c=$('form[name\x3d"stepForm"] input[name\x3d"startDate"]').val(),a=new Date(c),h=a.getDate();a.setDate(h+7);h=10>a.getMonth()+1?"0"+(a.getMonth()+1):a.getMonth()+1;var g=10>a.getDate()?"0"+a.getDate():a.getDate();a=a.getFullYear()+"-"+h+"-"+g;h=$(b).data("currency");g=$('form[name\x3d"stepForm"] input[name\x3d"hotelCode"]').val();var e=$(b).data("roomtypecode");b=$(b).data("rateplancode");getAnotherDayPrice(c,
a,h,g,e,b)},getAnotherDayPrice=function(b,c,a,h,g,e){b={startDate:b,endDate:c,currency:a,hotelCode:h,roomTypeCode:g,ratePlanCode:e,guestCount:"1",primaryLangID:$('form[name\x3d"stepForm"] input[name\x3d"primaryLangID"]').val()};$.ajax({type:"GET",url:"/global/ajax/reservation.anotherDayPrice.json",data:b,beforeSend:function(a){FES.UI.loading($(".loading-dimmd"),!0)},complete:function(a,b){FES.UI.loading($(".loading-dimmd"),!1)},success:function(b){if("OK"==b.result)if(b.anotherDayPriceList.length&&
0<b.anotherDayPriceList.length){b=b.anotherDayPriceList;for(var c="",d="",r="",u=0;u<b.length;u++){var q=b[u];0==u&&(d=q.priceDate);u==b.length-1&&(r=q.priceDate);var w="",x=q.currency+" "+formatMoneyComma(q.price);checkBookingDate(q.priceDate)&&(w+=" is-selected ");"N"==q.bookingYn&&(w+=" is-disabled ",x=Granite.I18n.get("No reservation"));"Y"==q.lowestAllYn&&(w+=" is-lowest ",x=q.currency+" "+formatMoneyComma(q.price)+" ("+Granite.I18n.get("Lowest price")+")");c+='\x3cli class\x3d"d113-anotherday__item '+
w+'"\x3e';c+='    \x3cspan class\x3d"d113-anotherday__date"\x3e'+q.dispDate+"\x3c/span\x3e";c+='    \x3cstrong class\x3d"d113-anotherday__price"\x3e'+x+"\x3c/strong\x3e";c+="\x3c/li\x3e"}$("section.c-modal.d113-anotherday.is-active").find("ol.d113-anotherday__list").html(c);$(window).trigger("resize");d==$('form[name\x3d"stepForm"] input[name\x3d"startDate"]').val()?($("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--prev").off("click"),$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--prev").attr("disabled",
"disabled")):($("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--prev").removeAttr("disabled"),$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--prev").off("click"),$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--prev").on("click",function(b){b=new Date(d);var c=b.getDate();b.setDate(c-7);c=10>b.getMonth()+1?"0"+(b.getMonth()+1):b.getMonth()+1;var f=10>b.getDate()?"0"+b.getDate():b.getDate();
b=b.getFullYear()+"-"+c+"-"+f;var m=new Date(d);c=m.getDate();m.setDate(c);c=10>m.getMonth()+1?"0"+(m.getMonth()+1):m.getMonth()+1;f=10>m.getDate()?"0"+m.getDate():m.getDate();c=m.getFullYear()+"-"+c+"-"+f;getAnotherDayPrice(b,c,a,h,g,e)}));$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--next").removeAttr("disabled");$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--next").off("click");$("section.c-modal.d113-anotherday.is-active").find("button.d113-anotherday__button--next").on("click",
function(b){b=new Date(r);var c=b.getDate();b.setDate(c+1);c=10>b.getMonth()+1?"0"+(b.getMonth()+1):b.getMonth()+1;var f=10>b.getDate()?"0"+b.getDate():b.getDate();b=b.getFullYear()+"-"+c+"-"+f;var d=new Date(r);c=d.getDate();d.setDate(c+8);c=10>d.getMonth()+1?"0"+(d.getMonth()+1):d.getMonth()+1;f=10>d.getDate()?"0"+d.getDate():d.getDate();c=d.getFullYear()+"-"+c+"-"+f;getAnotherDayPrice(b,c,a,h,g,e)})}else alert(Granite.I18n.get("No minimum information available."))}})},checkBookingDate=function(b){var c=
!1,a=$('form[name\x3d"stepForm"] input[name\x3d"startDate"]').val(),h=$('form[name\x3d"stepForm"] input[name\x3d"endDate"]').val();try{var g=a.replace(/-/gi,""),e=h.replace(/-/gi,""),d=b.replace(/-/gi,"");g<=d&&d<e&&(c=!0)}catch(k){c=!1}return c},d113_login=function(){var b=$('form[name\x3d"stepForm"] input[name\x3d"langCode"]').val(),c=$("#inp-login-id").val(),a=$("#inp-login-pw").val(),h=window.location.href;h.replace(h.split("/").pop(),"");h={};h.membershipNumber=c;h.password=a;$("#chk-save-id").is(":checked")?
(c=$("#inp-login-id").val(),setCookie("userInputId",c,1)):deleteCookie("userInputId");$.ajax({type:"POST",url:"/global/ajax/login.userLoginProc.json",data:h,beforeSend:function(b){FES.UI.loading($(".loading-dimmd"),!0)},success:function(a){"SUCCESS"==a.returnValue?d113_goStep3("room"):("FAIL"==a.returnValue||"INVALID_ID"==a.returnValue||"INVALID_PASSWORD"==a.returnValue?(a=2<=a.failCnt?Granite.I18n.get("Login failed {0} times. The information you entered does not match.",[a.failCnt]):Granite.I18n.get("Login failed. The information you entered does not match."),
alert(a)):"INACTIVE"==a.returnValue?(a=Granite.I18n.get("He is a dormant member. Are you sure you want to go to the sleeping member release page?"),confirm(a)&&(location.href="/global/"+b+"/member/login/sign-in-inactive.html")):"OLD_PWD"==a.returnValue?(a=Granite.I18n.get("Change in 90 days text")+"\n["+Granite.I18n.get("confirm")+"] "+Granite.I18n.get("Go to the password reset page."),a=a+"\n["+Granite.I18n.get("cancel")+"] "+Granite.I18n.get("Enter booking information"),confirm(a)?location.href=
"/global/"+b+"/member/login/password-change-reminder.html":d113_goStep3("room")):"BLOCK_ID"==a.returnValue?(a=Granite.I18n.get("Go to the Unblock Account page. Are you sure you want to move?"),confirm(a)&&(location.href="/global/"+b+"/member/login/account-lock.html")):"INIT_PWD"==a.returnValue?(a=Granite.I18n.get("Go to the password reset page."),confirm(a)?location.href="/global/"+b+"/member/login/change-password.html":d113_goStep3("room")):(a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator"),
alert(a)),FES.UI.loading($(".loading-dimmd"),!1))},error:function(){var a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator");alert(a);FES.UI.loading($(".loading-dimmd"),!1)}})},d113_join=function(){$('form[name\x3d"stepForm"] input[name\x3d"requestJoin"]').val("Y");d113_goStep3()},d113_getRoomDetailPop=function(b){var c={type:$(b).data("detailtype"),langCode:$('form[name\x3d"stepForm"] input[name\x3d"langCode"]').val(),hotelPropertyCode:$(b).data("detailpropertycode"),
code:$(b).data("detailcode")};$.ajax({type:"GET",url:"/global/ajax/reservation.aemContentInfo.json",data:c,success:function(a){if(a.result&&"OK"==a.result){a=a.aemContentInfo;var c=$(b).closest('div.d113-accordion[data-js\x3d"accordion"]').find('section[data-room\x3d"room"]');if(a.roomKeyvisualMap){var g=a.roomKeyvisualMap.thumImg;g="tablet"==viewType?g+renditionTablet:"mobile"==viewType?g+renditionMobile:g+renditionWeb;c.find(".d114-photo img").attr("src",g)}c.find(".d114-photo img").attr("alt",
a.roomName);g="";a.buildingType&&""!=a.buildingType&&(g+="\x3cspan\x3e"+a.buildingType+"\x3c/span\x3e");a.roomType&&""!=a.roomType&&(g+="\x3cspan\x3e"+a.roomType+"\x3c/span\x3e");c.find(".d114-info__eyebrow").html(g);c.find(".d114-info__subject").html(a.roomName);c.find(".d114-info__text").html(a.roomText);if(a.roomSpecList){g="";for(var e=a.roomSpecList,d=0;d<e.length;d++)g+="\x3cli\x3e",g+='    \x3cstrong class\x3d"d114-room__sbj"\x3e'+Granite.I18n.get(e[d].contentTitle)+"\x3c/strong\x3e",g+='    \x3cspan class\x3d"d114-room__text"\x3e'+
e[d].contentText+"\x3c/span\x3e",g+="\x3c/li\x3e";c.find(".d114-content__info ul").html(g)}if(a.roomAmenityList&&a.roomAmenityList.length&&0<a.roomAmenityList.length){var k=a.roomAmenityList[0];c.find("div.d114-amenities__item").each(function(a,b){var c="";if(0==a){if(k&&k.generalTitle)for($(b).find(".d114-amenities__sbj").html(k.generalTitle),a=0;a<k.generalTagTitleList.length;a++)c+="\x3cli\x3e"+k.generalTagTitleList[a].title+"\x3c/li\x3e";$(b).find("ul").html(c)}else if(1==a){if(k&&k.bathroomTitle)for($(b).find(".d114-amenities__sbj").html(k.bathroomTitle),
a=0;a<k.bathroomTagTitleList.length;a++)c+="\x3cli\x3e"+k.bathroomTagTitleList[a].title+"\x3c/li\x3e";$(b).find("ul").html(c)}else if(2==a){if(k&&k.othersTitle)for($(b).find(".d114-amenities__sbj").html(k.othersTitle),a=0;a<k.othersTagTitleList.length;a++)c+="\x3cli\x3e"+k.othersTagTitleList[a].title+"\x3c/li\x3e";$(b).find("ul").html(c)}});c.find("div.d114-amenities").show()}else c.find("div.d114-amenities").hide()}},error:function(a,b,c){a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator");
alert(a)}})},d113_getRateDetailPop=function(b){var c={type:$(b).data("detailtype"),langCode:$('form[name\x3d"stepForm"] input[name\x3d"langCode"]').val(),hotelPropertyCode:$(b).data("detailpropertycode"),code:$(b).data("detailcode"),startDate:$('form[name\x3d"stepForm"] input[name\x3d"startDate"]').val(),endDate:$('form[name\x3d"stepForm"] input[name\x3d"endDate"]').val()};$.ajax({type:"GET",url:"/global/ajax/reservation.aemContentInfo.json",data:c,success:function(a){if(a.result&&"OK"==a.result){a=
a.aemContentInfo;var c=$(b).closest('div.d113-accordion[data-js\x3d"accordion"]').find('section[data-room\x3d"package"]'),g=$("#sel-country").data("orgncurrency");if(a.packageKeyvisualMap){var e=a.packageKeyvisualMap.thumImg;e="tablet"==viewType?e+renditionTablet:"mobile"==viewType?e+renditionMobile:e+renditionWeb;c.find(".d115-photo__center img").attr("src",e)}c.find(".d115-photo__center img").attr("alt",a.rateName);c.find(".d115-info__subject").html(a.rateName);c.find(".d115-info__text").html(a.rateDescription);
c.find(".d115-info__basic span").eq(0).html(a.rateFrom+" ~ "+a.rateTo);c.find(".d115-info__basic span").eq(1).html(a.rateStayFrom+" ~ "+a.rateStayTo);c.find(".d115-info__basic span").eq(2).html("Tel:"+a.rateInquirynumber);$(".d115-gaspard").hide();"packages"==$(b).data("detailtype")&&($(".d115-gaspard").show(),c.find(".d115-gaspard__title").html(a.typeName),$(b).data("detailcode"),e=$(b).closest("div.d113-accordion__li[data-rateplancode]").find("span.d113-price__text[data-orgnprice]").data("orgnprice"),
1>$(b).closest("div.d113-accordion__li[data-rateplancode]").find("span.d113-price__text[data-orgnprice]").size()&&(e=$(b).closest("li.d113-compare__list[data-rateplancode]").find("span.d113-price__total-text[data-orgnprice]").data("orgnprice")),c.find(".d115-gaspard__price").html("\x3cspan\x3e"+g+"\x3c/span\x3e "+formatMoneyComma(e)+" \x3c/div\x3e"),a.typeLunchDinner?c.find(".d115-gaspard__item:first .d115-gaspard__info").html(a.typeLunchDinner.replace(/(\n|\r\n)/g,"\x3cbr\x3e")+"\x3cbr/\x3e"+a.typeSpecialbenefit):
c.find(".d115-gaspard__item:first .d115-gaspard__info").html(a.typeSpecialbenefit),c.find(".d115-gaspard__item:first .d115-gaspard__notice").html(""),c.find(".d115-gaspard__item:last .d115-gaspard__notice").html(a.typeEtc));a.notetext?c.find(".d115-precautionary__info ul").html(a.notetext):c.find(".d115-precautionary__info ul").html("")}},error:function(a,b,c){a=Granite.I18n.get("An error occurred while processing Please try again or contact the administrator");alert(a)}})};
function formatMoneyComma(b){if("undefined"===typeof b)return"";b=b.toString();b.replace(/,/g,"");return b.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function setCookie(b,c,a){var h=new Date;h.setDate(h.getDate()+a);c=escape(c)+(null==a?"":"; expires\x3d"+h.toGMTString());document.cookie=b+"\x3d"+c}function deleteCookie(b){var c=new Date;c.setDate(c.getDate()-1);document.cookie=b+"\x3d ; expires\x3d"+c.toGMTString()}
function getCookie(b){b+="\x3d";var c=document.cookie,a=c.indexOf(b),h="";-1!=a&&(a+=b.length,b=c.indexOf(";",a),-1==b&&(b=c.length),h=c.substring(a,b));return unescape(h)};